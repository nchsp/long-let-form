<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long Lets - Haize Realty Malta</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%23006d77'/%3E%3Ctext x='16' y='22' font-family='Georgia,serif' font-size='14' font-weight='bold' fill='white' text-anchor='middle'%3ELL%3C/text%3E%3C/svg%3E">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@500;600&family=Cormorant+Garamond:wght@400;500;600&family=Nunito:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --lagoon-deep: #006d77;
            --lagoon-mid: #0097a7;
            --lagoon-bright: #40e0d0;
            --lagoon-light: #83f3e4;
            --limestone: #e8dcc4;
            --limestone-light: #f5f0e6;
            --limestone-gold: #d4a574;
            --limestone-warm: #c9a86c;
            --text-dark: #2d3a3a;
            --text-mid: #4a5568;
            --white: #ffffff;
            --error: #c53030;
        }

        html {
            height: 100%;
        }

        body {
            font-family: 'Nunito', sans-serif;
            min-height: 100%;
            background: linear-gradient(175deg, var(--lagoon-deep) 0%, #005a5f 40%, #004a4f 100%);
            color: var(--text-dark);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding: 40px 20px 60px;
            position: relative;
            overflow-x: hidden;
        }

        /* Noise texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 0;
        }

        /* Top accent bar */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: repeating-linear-gradient(
                90deg,
                var(--lagoon-bright) 0px,
                var(--lagoon-bright) 18px,
                transparent 18px,
                transparent 22px
            );
            z-index: 1000;
        }

        /* Wave animation at bottom */
        .wave-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100px;
            overflow: hidden;
            z-index: 0;
            pointer-events: none;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: -50%;
            width: 200%;
            height: 100px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120' preserveAspectRatio='none'%3E%3Cpath d='M0,60 C150,120 350,0 600,60 C850,120 1050,0 1200,60 L1200,120 L0,120 Z' fill='%2340e0d0' fill-opacity='0.12'/%3E%3C/svg%3E") repeat-x;
            background-size: 600px 100px;
            animation: wave 8s linear infinite;
        }

        .wave:nth-child(2) {
            bottom: 5px;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120' preserveAspectRatio='none'%3E%3Cpath d='M0,60 C150,120 350,0 600,60 C850,120 1050,0 1200,60 L1200,120 L0,120 Z' fill='%2340e0d0' fill-opacity='0.08'/%3E%3C/svg%3E") repeat-x;
            background-size: 600px 100px;
            animation: wave 12s linear infinite reverse;
        }

        @keyframes wave {
            0% { transform: translateX(0); }
            100% { transform: translateX(50%); }
        }

        /* Language Toggle */
        .lang-toggle {
            display: flex;
            gap: 0;
            margin-bottom: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 30px;
            padding: 4px;
            position: relative;
            z-index: 10;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.15);
        }

        .lang-btn {
            padding: 8px 20px;
            border: none;
            background: transparent;
            color: rgba(255,255,255,0.7);
            font-family: 'Nunito', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            letter-spacing: 0.5px;
        }

        .lang-btn:hover {
            color: var(--white);
        }

        .lang-btn.active {
            background: var(--lagoon-bright);
            color: var(--lagoon-deep);
            font-weight: 600;
        }

        /* Form Container */
        .form-container {
            background: var(--limestone-light);
            border-radius: 24px;
            padding: 50px 45px;
            max-width: 520px;
            width: 100%;
            position: relative;
            z-index: 10;
            box-shadow: 
                0 25px 80px rgba(0,0,0,0.25),
                0 10px 30px rgba(0,0,0,0.15),
                inset 0 1px 0 rgba(255,255,255,0.5);
        }

        .form-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .form-header h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.4rem;
            font-weight: 600;
            color: var(--lagoon-deep);
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .form-header .subtitle {
            font-family: 'Caveat', cursive;
            font-size: 1.4rem;
            color: var(--limestone-warm);
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .form-group label .required {
            color: var(--lagoon-mid);
            margin-left: 2px;
        }

        .form-group input[type="text"],
        .form-group input[type="tel"],
        .form-group input[type="date"],
        .form-group textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--limestone);
            border-radius: 12px;
            font-family: 'Nunito', sans-serif;
            font-size: 1rem;
            color: var(--text-dark);
            background: var(--white);
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--lagoon-bright);
            box-shadow: 0 0 0 4px rgba(64, 224, 208, 0.15);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: #a0aab4;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        /* Checkbox/Radio Groups */
        .checkbox-group,
        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .checkbox-item,
        .radio-item {
            position: relative;
        }

        .checkbox-item input,
        .radio-item input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .checkbox-item label,
        .radio-item label {
            display: inline-block;
            padding: 10px 18px;
            background: var(--white);
            border: 2px solid var(--limestone);
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-mid);
            transition: all 0.25s ease;
            margin-bottom: 0;
        }

        .checkbox-item:hover label,
        .radio-item:hover label {
            border-color: var(--lagoon-mid);
            color: var(--lagoon-deep);
        }

        .checkbox-item input:checked + label,
        .radio-item input:checked + label {
            background: var(--lagoon-deep);
            border-color: var(--lagoon-deep);
            color: var(--white);
        }

        /* Other input within checkbox group */
        .other-input-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-basis: 100%;
            margin-top: 5px;
        }

        .other-input-wrapper input[type="text"] {
            flex: 1;
            padding: 10px 14px;
            border: 2px solid var(--limestone);
            border-radius: 25px;
            font-family: 'Nunito', sans-serif;
            font-size: 0.9rem;
        }

        .other-input-wrapper input[type="text"]:focus {
            outline: none;
            border-color: var(--lagoon-bright);
        }

        /* Submit Button */
        .submit-btn {
            width: 100%;
            padding: 16px 32px;
            background: linear-gradient(135deg, var(--lagoon-deep) 0%, #005a5f 100%);
            color: var(--white);
            border: none;
            border-radius: 14px;
            font-family: 'Nunito', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 109, 119, 0.35);
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        /* Footer link */
        .footer-link {
            text-align: center;
            margin-top: 30px;
            position: relative;
            z-index: 10;
        }

        .footer-link a {
            color: rgba(255,255,255,0.6);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 400;
            transition: color 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .footer-link a:hover {
            color: var(--lagoon-bright);
        }

        .footer-link a svg {
            width: 14px;
            height: 14px;
            opacity: 0.7;
        }

        /* Success message */
        .success-message {
            display: none;
            text-align: center;
            padding: 60px 40px;
        }

        .success-message.show {
            display: block;
        }

        .success-message svg {
            width: 80px;
            height: 80px;
            color: var(--lagoon-deep);
            margin-bottom: 20px;
        }

        .success-message h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2rem;
            color: var(--lagoon-deep);
            margin-bottom: 10px;
        }

        .success-message p {
            color: var(--text-mid);
            font-size: 1.05rem;
        }

        .success-socials {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 25px;
        }

        .success-socials a {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--lagoon-deep);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .success-socials a:hover {
            background: var(--lagoon-mid);
            transform: translateY(-2px);
        }

        .success-socials .threads-icon {
            width: 16px;
            height: 16px;
        }

        .back-to-website {
            display: inline-block;
            margin-top: 25px;
            color: var(--lagoon-deep);
            text-decoration: none;
            font-size: 0.95rem;
            padding: 10px 20px;
            border: 1px solid var(--lagoon-deep);
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        .back-to-website:hover {
            background: var(--lagoon-deep);
            color: white;
        }

        .form-content.hidden {
            display: none;
        }

        /* Loading state */
        .submit-btn.loading {
            pointer-events: none;
            opacity: 0.8;
        }

        .submit-btn.loading::after {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            display: inline-block;
            margin-left: 10px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 600px) {
            body {
                padding: 30px 15px 80px;
            }

            .form-container {
                padding: 35px 25px;
                border-radius: 20px;
            }

            .form-header h1 {
                font-size: 1.9rem;
            }

            .checkbox-item label,
            .radio-item label {
                padding: 8px 14px;
                font-size: 0.85rem;
            }

            .lang-btn {
                padding: 6px 14px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>

    <!-- Animated waves -->
    <div class="wave-container">
        <div class="wave"></div>
        <div class="wave"></div>
    </div>

    <!-- Language Toggle -->
    <div class="lang-toggle">
        <button class="lang-btn active" data-lang="en">EN</button>
        <button class="lang-btn" data-lang="fr">FR</button>
        <button class="lang-btn" data-lang="es">ES</button>
    </div>

    <!-- Form Container -->
    <div class="form-container">
        
        <!-- Success Message (hidden by default) -->
        <div class="success-message" id="successMessage">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h2 data-i18n="success_title">Thank You!</h2>
            <p data-i18n="success_text">We'll be in touch soon.</p>
            
            <div class="success-socials">
                <a href="https://www.pinterest.com/haizerealty/" target="_blank" rel="noopener noreferrer" title="Pinterest">
                    <i class="fab fa-pinterest-p"></i>
                </a>
                <a href="https://www.facebook.com/profile.php?id=61579815594446" target="_blank" rel="noopener noreferrer" title="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://www.instagram.com/haize.realty/" target="_blank" rel="noopener noreferrer" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.threads.com/@haize.realty" target="_blank" rel="noopener noreferrer" title="Threads">
                    <svg class="threads-icon" viewBox="0 0 192 192" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M141.537 88.988a66.667 66.667 0 0 0-2.518-1.143c-1.482-27.307-16.403-42.94-41.457-43.1h-.34c-14.986 0-27.449 6.396-35.12 18.036l13.779 9.452c5.73-8.695 14.724-10.548 21.348-10.548h.229c8.249.053 14.474 2.452 18.503 7.129 2.932 3.405 4.893 8.111 5.864 14.05-7.314-1.243-15.224-1.626-23.68-1.14-23.82 1.371-39.134 15.264-38.105 34.568.522 9.792 5.4 18.216 13.735 23.719 7.047 4.652 16.124 6.927 25.557 6.412 12.458-.683 22.231-5.436 29.049-14.127 5.178-6.6 8.453-15.153 9.899-25.93 5.937 3.583 10.337 8.298 12.767 13.966 4.132 9.635 4.373 25.468-8.546 38.376-11.319 11.308-24.925 16.2-45.488 16.351-22.809-.169-40.06-7.484-51.275-21.742C35.236 139.966 29.808 120.682 29.6 96c.208-24.682 5.636-43.966 16.128-57.317 11.215-14.258 28.466-21.573 51.275-21.742 22.997.174 40.526 7.557 52.103 21.95 5.681 7.06 9.882 15.857 12.53 26.2l16.502-4.047c-3.178-12.471-8.467-23.437-15.837-32.606C148.053 10.953 126.622 1.88 98.958 1.68h-.09C71.254 1.88 50.016 10.972 35.86 28.632 20.209 48.181 12.136 76.16 12 96.56v.88c.136 20.4 8.209 48.379 23.86 67.928 14.156 17.66 35.394 26.752 63.108 26.952h.09c24.488-.163 42.136-6.85 56.77-21.479 19.156-19.163 18.563-43.398 12.34-57.912-4.46-10.413-13.03-18.796-25.631-24.942z"/><path fill="currentColor" d="M98.966 129.545c-10.08.553-20.329-3.97-21.058-14.687-.559-8.212 5.642-17.361 25.07-18.476 2.084-.12 4.133-.178 6.143-.178 6.273 0 12.143.553 17.514 1.606-1.992 27.091-17.086 31.183-27.669 31.735z"/></svg>
                </a>
                <a href="https://www.linkedin.com/in/thomas-inchauspe-0705aa383/" target="_blank" rel="noopener noreferrer" title="LinkedIn">
                    <i class="fab fa-linkedin-in"></i>
                </a>
            </div>
            
            <a href="https://haize-realty.com" class="back-to-website" data-i18n="back_to_website">← Back to Website</a>
        </div>

        <!-- Form Content -->
        <div class="form-content" id="formContent">
            <div class="form-header">
                <h1 data-i18n="title">Long Lets – Malta</h1>
                <p class="subtitle" data-i18n="subtitle">Let's find your place</p>
            </div>

            <form id="leadForm">
                <!-- Name -->
                <div class="form-group">
                    <label data-i18n="name_label">Name <span class="required">*</span></label>
                    <input type="text" name="name" required data-i18n-placeholder="name_placeholder">
                </div>

                <!-- WhatsApp -->
                <div class="form-group">
                    <label data-i18n="whatsapp_label">WhatsApp <span class="required">*</span></label>
                    <input type="tel" name="whatsapp" required placeholder="+356 9999 9999">
                </div>

                <!-- Property Type -->
                <div class="form-group">
                    <label data-i18n="property_label">What kind of property? <span class="required">*</span></label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="property_type" id="studio" value="Studio" required>
                            <label for="studio" data-i18n="studio">Studio</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="property_type" id="1bed" value="1 Bedroom">
                            <label for="1bed" data-i18n="1bed">1 Bedroom</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="property_type" id="2bed" value="2 Bedrooms">
                            <label for="2bed" data-i18n="2bed">2 Bedrooms</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="property_type" id="3bed" value="3 Bedrooms">
                            <label for="3bed" data-i18n="3bed">3 Bedrooms</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="property_type" id="other_type" value="Other">
                            <label for="other_type" data-i18n="other">Other</label>
                        </div>
                        <div class="other-input-wrapper" id="otherTypeWrapper" style="display: none;">
                            <input type="text" name="property_type_other" data-i18n-placeholder="specify_placeholder">
                        </div>
                    </div>
                </div>

                <!-- Areas -->
                <div class="form-group">
                    <label data-i18n="areas_label">Which areas?</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" name="areas" id="sliema" value="Sliema">
                            <label for="sliema">Sliema</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="areas" id="stjulians" value="St Julian's">
                            <label for="stjulians">St Julian's</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="areas" id="swieqi" value="Swieqi">
                            <label for="swieqi">Swieqi</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="areas" id="gzira" value="Gzira">
                            <label for="gzira">Gzira</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="areas" id="msida" value="Msida">
                            <label for="msida">Msida</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" name="areas" id="other_area" value="Other">
                            <label for="other_area" data-i18n="other">Other</label>
                        </div>
                        <div class="other-input-wrapper" id="otherAreaWrapper" style="display: none;">
                            <input type="text" name="areas_other" data-i18n-placeholder="specify_placeholder">
                        </div>
                    </div>
                </div>

                <!-- Budget -->
                <div class="form-group">
                    <label data-i18n="budget_label">What is your budget?</label>
                    <div class="radio-group">
                        <div class="radio-item">
                            <input type="radio" name="budget" id="budget1" value="€800 - €1000">
                            <label for="budget1">€800 - €1000</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="budget" id="budget2" value="€1000 - €1300">
                            <label for="budget2">€1000 - €1300</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="budget" id="budget3" value="€1300 - €1600">
                            <label for="budget3">€1300 - €1600</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="budget" id="budget4" value="€1600 - €2000">
                            <label for="budget4">€1600 - €2000</label>
                        </div>
                        <div class="radio-item">
                            <input type="radio" name="budget" id="budget5" value="€2000+">
                            <label for="budget5">€2000 +</label>
                        </div>
                    </div>
                </div>

                <!-- Move-in Date -->
                <div class="form-group">
                    <label data-i18n="movein_label">Move-in date</label>
                    <input type="date" name="move_in_date">
                </div>

                <!-- Further Details -->
                <div class="form-group">
                    <label data-i18n="details_label">Further details</label>
                    <textarea name="details" data-i18n-placeholder="details_placeholder"></textarea>
                </div>

                <!-- Submit -->
                <button type="submit" class="submit-btn" data-i18n="submit">Send Request</button>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer-link">
        <a href="https://www.haize-realty.com/" target="_blank">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.3" stroke-linecap="round">
                <path d="M1 13 
                         C3 13, 5 11, 6 9 
                         C7 7, 9 5, 12 5 
                         C16 5, 19 8, 19 12 
                         C19 16, 16 19, 12 19 
                         C9 19, 6.5 17, 6.5 14 
                         C6.5 11.5, 8.5 9.5, 11 9.5 
                         C13 9.5, 14.5 11, 14.5 12.5 
                         C14.5 14, 13.2 15, 12 15 
                         C11 15, 10.5 14.3, 10.5 13.5
                         C10.5 12.8, 11 12.3, 11.5 12.3"/>
            </svg>
            Haize Realty
        </a>
    </div>

    <script>
        // ============================================
        // CONFIGURATION - n8n Webhook URL
        // ============================================
        
       const WEBHOOK_URL = 'https://connect-system34.haize-realty.com/webhook/form-submission';
        
        // ============================================

        // ============================================
        // TRANSLATIONS
        // ============================================
        const translations = {
            en: {
                title: "Long Lets – Malta",
                subtitle: "Let's find your place",
                name_label: "Name <span class='required'>*</span>",
                name_placeholder: "Your full name",
                whatsapp_label: "WhatsApp <span class='required'>*</span>",
                property_label: "What kind of property? <span class='required'>*</span>",
                studio: "Studio",
                "1bed": "1 Bedroom",
                "2bed": "2 Bedrooms",
                "3bed": "3 Bedrooms",
                other: "Other",
                specify_placeholder: "Please specify...",
                areas_label: "Which areas?",
                budget_label: "What is your budget?",
                movein_label: "Move-in date",
                details_label: "Further details",
                details_placeholder: "Garage, pets, other...",
                submit: "Send Request",
                success_title: "Thank You!",
                success_text: "We'll be in touch soon.",
                back_to_website: "← Back to Website"
            },
            fr: {
                title: "Location Longue – Malte",
                subtitle: "Trouvons votre lieu",
                name_label: "Nom <span class='required'>*</span>",
                name_placeholder: "Votre nom complet",
                whatsapp_label: "WhatsApp <span class='required'>*</span>",
                property_label: "Quel type de bien ? <span class='required'>*</span>",
                studio: "Studio",
                "1bed": "1 Chambre",
                "2bed": "2 Chambres",
                "3bed": "3 Chambres",
                other: "Autre",
                specify_placeholder: "Précisez...",
                areas_label: "Quels quartiers ?",
                budget_label: "Quel est votre budget ?",
                movein_label: "Date d'emménagement",
                details_label: "Précisions",
                details_placeholder: "Garage, animaux, autre...",
                submit: "Envoyer",
                success_title: "Merci !",
                success_text: "Nous vous recontactons très vite.",
                back_to_website: "← Retour au Site"
            },
            es: {
                title: "Alquiler Largo – Malta",
                subtitle: "Encontremos tu lugar",
                name_label: "Nombre <span class='required'>*</span>",
                name_placeholder: "Tu nombre completo",
                whatsapp_label: "WhatsApp <span class='required'>*</span>",
                property_label: "¿Qué tipo de propiedad? <span class='required'>*</span>",
                studio: "Estudio",
                "1bed": "1 Habitación",
                "2bed": "2 Habitaciones",
                "3bed": "3 Habitaciones",
                other: "Otro",
                specify_placeholder: "Especifica...",
                areas_label: "¿Qué zonas?",
                budget_label: "¿Cuál es tu presupuesto?",
                movein_label: "Fecha de entrada",
                details_label: "Más detalles",
                details_placeholder: "Garaje, mascotas, otro...",
                submit: "Enviar Solicitud",
                success_title: "¡Gracias!",
                success_text: "Te contactamos pronto.",
                back_to_website: "← Volver al Sitio"
            }
        };

        let currentLang = 'en';

        // Apply translations
        function applyTranslations(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) {
                    el.innerHTML = t[key];
                }
            });

            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (t[key]) {
                    el.placeholder = t[key];
                }
            });

            // Update HTML lang attribute
            document.documentElement.lang = lang;
        }

        // Language toggle
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                applyTranslations(btn.dataset.lang);
            });
        });

        // Show "Other" input fields
        document.getElementById('other_type').addEventListener('change', function() {
            document.getElementById('otherTypeWrapper').style.display = this.checked ? 'flex' : 'none';
        });

        document.querySelectorAll('input[name="property_type"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const wrapper = document.getElementById('otherTypeWrapper');
                wrapper.style.display = this.id === 'other_type' && this.checked ? 'flex' : 'none';
            });
        });

        document.getElementById('other_area').addEventListener('change', function() {
            document.getElementById('otherAreaWrapper').style.display = this.checked ? 'flex' : 'none';
        });

        // Form submission
        document.getElementById('leadForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = this.querySelector('.submit-btn');
            submitBtn.classList.add('loading');

            // Gather form data
            const formData = new FormData(this);
            const data = {
                name: formData.get('name'),
                whatsapp: formData.get('whatsapp'),
                property_type: formData.get('property_type'),
                property_type_other: formData.get('property_type_other') || '',
                areas: formData.getAll('areas'),
                areas_other: formData.get('areas_other') || '',
                budget: formData.get('budget'),
                move_in_date: formData.get('move_in_date'),
                details: formData.get('details'),
                language: currentLang,
                submitted_at: new Date().toISOString()
            };

            // If property type is "Other", append the specification
            if (data.property_type === 'Other' && data.property_type_other) {
                data.property_type = `Other: ${data.property_type_other}`;
            }

            // If areas includes "Other", append the specification
            if (data.areas.includes('Other') && data.areas_other) {
                data.areas = data.areas.map(a => a === 'Other' ? `Other: ${data.areas_other}` : a);
            }

            let success = false;

            // Send to n8n webhook
            if (WEBHOOK_URL) {
                try {
                    const response = await fetch(WEBHOOK_URL, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });
                    success = response.ok;
                } catch (err) {
                    console.error('Webhook error:', err);
                }
            } else {
                // Test mode - no endpoint configured
                console.log('Form data (configure WEBHOOK_URL to enable):', data);
                success = true;
            }

            submitBtn.classList.remove('loading');

            if (success) {
                document.getElementById('formContent').classList.add('hidden');
                document.getElementById('successMessage').classList.add('show');
            }
        });

        // Initialize
        applyTranslations('en');
    </script>
</body>
</html>
